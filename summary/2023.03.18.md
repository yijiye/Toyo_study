# Responder Chain
### ì°¸ì—¬ì
 - vetto
 - harry
 - ë¦¬ì§€
 - ì†¡ì¤€

### ì§„í–‰ì
- ë¦¬ì§€

### ì§„í–‰ì¼ì‹œ
- 2023.03.18
 
### í•™ìŠµí‚¤ì›Œë“œ
- Responder chain ì´í•´
- Viewì˜ ê³„ì¸µ ì´í•´
- addGestureRecognizer
- TapGestureRecognizer

## ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 1: UIKitì´ ê°€ì¥ ë Viewë¥¼ ì°¾ì•„ë‚´ëŠ” ë°©ë²•
<img src="https://i.imgur.com/79l3yYi.png" width="300">

```swift
class GreenView: UIView {
    
    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {

        if !isUserInteractionEnabled || isHidden || alpha <= 0.01 {
            return nil
        }
        if self.point(inside: point, with: event) {
            for subview in subviews.reversed() {
                let convertedPoint = subview.convert(point, from: self)
                if let hitTestView = subview.hitTest(convertedPoint, with: event) {

                    return hitTestView
                }
            }
            print("Green") // í˜„ì¬ ë·°ë¥¼ ë‚˜íƒ€ëƒ„
            return self
        }
        return nil
    }
```

### greenViewìœ„ì— ìˆëŠ” purpleView í„°ì¹˜í•  ë•Œ ê²°ê³¼
- ê²¹ì³ ìˆëŠ” ë¶€ë¶„ì„ í„°ì¹˜í•œ ê²½ìš°
  hitTestì½”ë“œê°€ ì‘ë™í•¨
 
- ê²¹ì³ìˆì§€ ì•Šì€ ë¶€ë¶„ì„ í„°ì¹˜í•œ ê²½ìš°
  hitTestì½”ë“œê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ
- ì™œ ê·¸ëŸ¬í•œ ê²°ê³¼ê°€ ì¼ì–´ë‚¬ì„ê¹Œìš”?
  viewìœ„ì— greenView, blueViewê°€ ìˆì–´ì„œ responder chainì„ í†µí•´ ì „ë‹¬ë˜ëŠ”ë°, purpleViewì˜ ê²¹ì³ìˆì§€ ì•Šì€ ë¶€ë¶„ì€ greenViewë¥¼ ê±°ì¹˜ì§€ ëª»í•´ì„œ ì•„ì˜ˆ ì „ë‹¬ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸
  
<img src="https://i.imgur.com/yU6nDxE.png" width="400">

  

## ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 2: ResponderChain í™œìš©í•´ë³´ê¸°
``` swift
import UIKit

class ViewController: UIViewController {

    @IBOutlet weak var greenView: UIView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        let gesture = UITapGestureRecognizer(target: self, action: #selector(action(_:)))
        self.greenView.addGestureRecognizer(gesture)
    }

    @objc func action(_ sender: UITapGestureRecognizer) {
        if greenView.backgroundColor?.cgColor == UIColor.systemGreen.cgColor {
            greenView.backgroundColor = .black
        } else {
            greenView.backgroundColor = .systemGreen
        }
    }
}
```

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### systemColorì˜ ë¬¸ì œ
greenViewì˜ ë°±ê·¸ë¼ìš´ë“œ Colorë¥¼ ë°”ê¿”ì£¼ë ¤ê³  backgroudColor == .systemGreenì´ë¼ëŠ” ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ì˜€ëŠ”ë° ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ í›„ backgroundColor == .blackë¼ëŠ” ì¡°ê±´ë¬¸ìœ¼ë¡œ ìˆ˜ì •í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì˜€ë‹¤.(ëª¨ë“  systemColorì— ëŒ€í•´ì„œ ì ìš©ì´ ì•ˆë¨)

ê·¸ ì´ìœ ë¥¼ ì¶”ì¸¡í•˜ê¸°ë¡œëŠ” systemColorëŠ” ì‚¬ìš©ìì˜ í…Œë§ˆì— ì˜í•´ì„œ ìƒ‰ì´ ì¡°ê¸ˆ ë°”ë€ŒëŠ” Colorì¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆëŠ”ë° ë•Œë¬¸ì— ë“±ìœ„ì—°ì‚°ì(==)ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ë¹„êµê°€ ì •í™•íˆ ì•ˆë˜ì–´ elseë¬¸ë§Œ ì‹¤í–‰ë˜ëŠ” ê²ƒìœ¼ë¡œ ìƒê°í•˜ê³  ìˆë‹¤.

```swift=
//ì‘ë™í•˜ì§€ ì•Šì€ ì½”ë“œ
if greenView.backgroundColor == .systemGreen {
    greenView.backgroundColor = .black
} else {
    greenView.backgroundColor = .systemGreen
}

// ì‘ë™í•˜ëŠ” ì½”ë“œ
if greenView.backgroundColor == .black {
    greenView.backgroundColor = .systemGreen
} else {
    greenView.backgroundColor = .black
}
```

ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì •í™•í•œ ìƒ‰ì„ ë¹„êµí•´ì£¼ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™ëœë‹¤.

``` swift
@objc func action(_ sender: UITapGestureRecognizer) {
    if greenView.backgroundColor?.cgColor == UIColor.systemGreen.cgColor {
        greenView.backgroundColor = .black
    } else {
        greenView.backgroundColor = .systemGreen
    }
}
```

Responder ChainëŠ” ì´ë²¤íŠ¸ê°€ ì²˜ë¦¬ë˜ê±°ë‚˜ ë¹ ì ¸ë‚˜ê°ˆë•Œê¹Œì§€ ì´ë²¤íŠ¸ë¥¼ ìƒìœ„ë·°ë¡œ ì „ë‹¬í•œë‹¤. 
## ì°¸ê³ ë§í¬
[ê³µì‹ë¬¸ì„œ](https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/using_responders_and_the_responder_chain_to_handle_events#2865374)
