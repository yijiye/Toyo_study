
# Protocol Oriented Programming
### ì°¸ì—¬ì
 - vetto
 - harry
 - ë¦¬ì§€
 - ì†¡ì¤€

### ì§„í–‰ì
- vetto

### ì§„í–‰ì¼ì‹œ
- 2023.03.11
 
### í•™ìŠµí‚¤ì›Œë“œ
- Type
- Protocol
- Git, Branch

## ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 1: ê¸°ëŠ¥ì„ ìœ„í•´ í•„ìš”í•œ Protocol íƒ€ì…ì„ ì„¤ê³„í•˜ê¸°

- Chargerê°€ ì±„íƒí•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œ íƒ€ì…ì„ ìƒì„±
   - maximumWattPerHour: WattPerHour(ìµœëŒ€ í—ˆìš© ì™€íŠ¸ì‹œ) ë¥¼ ê°–ëŠ” í”„ë¡œí¼í‹°
   - convert(chargeableWattPerHour: WattPerHour) â†’ WattPerHour ë©”ì„œë“œ : ì¶©ì „ê¸°ì™€ ê¸°ê¸°ì˜ í—ˆìš© ì™€íŠ¸ì‹œë¥¼ ê²€ì‚¬í•´ì„œ, ê¸°ê¸°ì˜ í—ˆìš© ì™€íŠ¸ì‹œê°€ ë” ë‚®ë‹¤ë©´, ê¸°ê¸°ì— ë§ì¶”ì–´ ì™€íŠ¸ì‹œë¥¼ ë‚®ì¶”ì–´ ë°˜í™˜

```Swift
import Foundation

typealias WattPerHour = Int
typealias Watt = Int

protocol Chargeable {
    var maximumWattPerHour: WattPerHour { get }
    
    func convert(chargeableWattPerHour: WattPerHour) -> WattPerHour
}
```

## ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 2: Branchë¥¼ ë‚˜ëˆ„ì–´ êµ¬í˜„í•œ ë’¤ í•©ì¹˜ê¸°
- feat-MacBook ë¸Œëœì¹˜ë¡œ ì´ë™í•´ ë§¥ë¶ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- ë§¥ë¶ì€ í”„ë¡œí¼í‹°ë¡œ ë‹¤ìŒì„ ê°–ìŠµë‹ˆë‹¤.
    - ê¸°ê¸°ì˜ í—ˆìš© ì¶©ì „ ì™€íŠ¸ì‹œ
    - í˜„ì¬ ì €ì¥ëœ ë°°í„°ë¦¬ìš©ëŸ‰ (ì™€íŠ¸ì‹œ)
    - ìµœëŒ€ ë°°í„°ë¦¬ ìš©ëŸ‰ (100ì™€íŠ¸ì‹œ)
- ë§¥ë¶ì€ ë©”ì„œë“œë¡œ ë‹¤ìŒì„ ê°–ìŠµë‹ˆë‹¤.
    - chargeBattery(charger: Chargeable) : ì¶©ì „ê¸°ë¥¼ í™œìš©í•´ ë°°í„°ë¦¬ë¥¼ ì™„ì „íˆ ì¶©ì „í•œ ë’¤ ì¶©ì „ì— ê±¸ë¦° ì‹œê°„ì„ print í•©ë‹ˆë‹¤.
- feat-Charger ë¸Œëœì¹˜ë¡œ ì´ë™í•´ ì¶©ì „ê¸°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- ì¶©ì „ê¸°ëŠ” ì‹¤í—˜ 1 í”„ë¡œí† ì½œì„ ì±„íƒ ë° êµ¬í˜„í•©ë‹ˆë‹¤.
- ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ maximumWattPerHour ë¥¼ ê°€ì§„ ì¶©ì „ê¸° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - 5Wh ì• í”Œì›Œì¹˜ ì¶©ì „ê¸°, 18Wh ì•„ì´í° ê³ ì† ì¶©ì „ê¸°, 30Wh ì•„ì´íŒ¨ë“œ ì¶©ì „ê¸°, 96Wh ë§¥ë¶ ì¶©ì „ê¸°, 106Wh ë§¥ë¶ ì¶©ì „ê¸°,
- ë‘ ë¸Œëœì¹˜ë¥¼ í•˜ë‚˜ì˜ Main ë¸Œëœì¹˜ë¡œ Mergeí•©ë‹ˆë‹¤.
- ë§¥ë¶ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ ìƒì„±í•œ í›„ ë‹¤ì–‘í•œ ì¶©ì „ê¸°ë¡œ ê°ê° ì¶©ì „í–ˆì„ ë•Œ ì™„ì „íˆ ì¶©ì „ë ë•Œê¹Œì§€ ëª‡ ì‹œê°„ì´ ê±¸ë¦¬ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!

```swift
var macbook = MacBook(currentBattery: 20)
let watchCharger: Charger = .init(maximumWattPerHour: 5)
let fastCharger: Charger = .init(maximumWattPerHour: 18)
let iPadCharger: Charger = .init(maximumWattPerHour: 30)
let macBookCharger: Charger = .init(maximumWattPerHour: 96)
let macBookCharger2: Charger = .init(maximumWattPerHour: 106)

macbook.chargeBattery(charger: watchCharger)
macbook.chargeBattery(charger: fastCharger)
macbook.chargeBattery(charger: iPadCharger)
macbook.chargeBattery(charger: macBookCharger)
macbook.chargeBattery(charger: macBookCharger2)
```

ê²°ê³¼
![](https://i.imgur.com/lNhoQXR.png)
* macbookì˜ í—ˆìš© ì¶©ì „ ì™€íŠ¸ì‹œë¥¼ ì„ì˜ë¡œ 65ë¡œ ê³ ì •í•˜ê³  ì¶œë ¥ì„ ì§„í–‰í•˜ì˜€ë‹¤.

### git branch merge ì‹œ ë¬¸ì œ í•´ê²°

1. `.gitattributes` íŒŒì¼ ìƒì„±
``` bash
vi .gitattributes // .gitattributes íŒŒì¼ ìƒì„±
*.pbxproj binary merge=union // .gitattributes íŒŒì¼ì— ì…ë ¥ í›„ ì €ì¥
```

<br>

2. `ì»¤ë°‹`
``` bash
git add .
git commit -m "*.pbxproj Avoid Merge Conflict"
git push origin main

```
- pbxproj íŒŒì¼ì—ëŠ” í”„ë¡œì íŠ¸ íŒŒì¼ì˜ referenceê°€ ìˆë‹¤.
- ê° ë¸Œëœì¹˜ ë³„ë¡œ ë™ì¼í•œ ìœ„ì¹˜ì— íŒŒì¼ì„ ìƒì„±í•˜ê²Œ ë˜ë©´ referenceê°€ ê²¹ì¹˜ê²Œ ë˜ì–´ conflictê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.
- pbxproj íŒŒì¼ì€ ì‚¬ì‹¤ í…ìŠ¤íŠ¸ íŒŒì¼ì´ì§€ë§Œ ì´ë¥¼ merge í• ë•Œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì²˜ëŸ¼ ì·¨ê¸‰í•´ conflictì„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

3. í´ë” êµ¬ì¡° ë¯¸ë¦¬ ìƒì„±í•˜ê¸°
- í´ë” ë° íŒŒì¼ êµ¬ì¡°ë¥¼ ë¯¸ë¦¬ êµ¬ìƒí•˜ì—¬ ìƒì„± í•´ë†“ê³  ë¸Œëœì¹˜ë¥¼ íŒŒê³  ë“¤ì–´ê°€ì„œ ë¹„ì–´ìˆëŠ” íŒŒì¼ì„ ë“¤ì–´ê°€ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë¨¸ì§€í•œë‹¤.

## ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 3: Protocolì„ í†µí•´ ê°€ë°©ì— ë„£ê¸°
```swift
struct MacBook: Portable {}
struct Charger: Chargeable, Portable {}

struct Bag {
    private(set) var items: [Portable] = []

    mutating func put(item: Portable) {
        items.append(item)
    }
}
```
```swift
let appleWatchCharger = Charger(maximumWattPerHour: 5)
let myMacBook = MacBook(currentBattery: 20)

var gucciBag = Bag()

gucciBag.put(item: appleWatchCharger)
gucciBag.put(item: myMacBook)
```

Portable í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê³  ìˆëŠ” íƒ€ì…ë“¤ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ë°°ì—´ì„ ì„ ì–¸í•´ì¤€ë’¤ MacBook ì¸ìŠ¤í„´ìŠ¤ì™€ Charger ì¸ìŠ¤í„´ìŠ¤ê°€ Bag.items ë°°ì—´ ì•ˆì— ì¶”ê°€ ë  ìˆ˜ ìˆê²Œ MacBook, Chargeríƒ€ì…ì— Portable í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

###### tags: `toyo`