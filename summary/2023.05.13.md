# âœï¸ 17ì£¼ì°¨ \[8ê¸°\] Bë°˜ ìŠ¤í„°ë””

## ğŸ—“2023-05-13

**ì°¸ì—¬ì** : ë¦¬ì§€, vetto, ì†¡ì¤€

**ì§„í–‰ì** : vetto

  
## \[ê¸ˆì£¼ì˜ ì‹¤í—˜ğŸ”¥\] CoreAnimations

### ğŸ‘¨â€ğŸ”¬ ì‹¤í—˜ 1: Layer Based Drawing í•´ë³´ê¸°

<img src ="https://s3.ap-northeast-2.amazonaws.com/media.yagom-academy.kr/resources/usr/6131c8fa2e11413823f8dd7f/20220225/621887f4536b5e1551d11266.png" width="300">

- ì•„ë˜ê°€ ë³¼ë¡í•œ ëª¨ì–‘ì˜ ì»µì´ ìˆìŠµë‹ˆë‹¤.
- ì»µì—ëŠ” ìŒë£Œê°€ ë‹´ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì»µ ì•ˆì—ëŠ” ë¹¨ëŒ€ê°€ í•˜ë‚˜ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.

### íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

- ì»µ ë°”ë‹¥ í˜¸ ê·¸ë¦¬ê¸°
```swift
path.addQuadCurve(to: , controlPoint: )
```
addQuadCurveë¥¼ í™œìš©í•´ toì— ëì§€ì , controlPointì— ì¤‘ê°„ ì§€ì ì„ ë„£ì–´ ê·¸ë ¤ì¤Œ
[ê³„ì‚°í•´ì£¼ëŠ” ì‚¬ì´íŠ¸](https://www.desmos.com/calculator/lvdgnyhkvy?lang=ko)

- ë¹¨ëŒ€ ë ë¶€ë¶„ ë™ê·¸ë—ê²Œ ê·¸ë¦¬ê¸°
`path.lineCapStyle` ì— round ê°’ì„ ì£¼ì–´ë„ layerì˜ ê°’ì´ ë³€í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆëŠ”ë°, pathì— ì£¼ëŠ”ê²ƒì´ ì•„ë‹ˆë¼ layer ìì²´ì˜ lineCap ìŠ¤íƒ€ì¼ì„ ë³€í™”ì‹œí‚¤ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì˜€ìŒ.

```swift
let path = UIBezierPath()
path.lineWidth = 15
strawLayer.lineWidth = path.lineWidth
strawLayer.lineCap = .round
```

- Mask
ì–´ë–¤ ë¶€ë¶„ì„ ì œì™¸í•˜ê³  ë³´ì—¬ì£¼ê³  ì‹¶ì„ ë•Œ, ê·¸ ë¶€ë¶„ì„ íˆ¬ëª…ì²˜ë¦¬í•´ì„œ ê°€ë¦¬ê³  ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Layer ê³„ì¸µ

   - ì»µ pathì™€ ë™ì¼í•˜ê²Œ êµ¬í˜„
   - drinksLayer.maskì— ë„£ì–´ì¤Œ
   - maskì˜ path ê°’ì„ ì¡°ì ˆí•˜ì—¬ ìŒë£Œ ì–‘ ì¡°ì ˆ


## ê°œì¸ ì‘í’ˆ

### ì†¡ì¤€
<details><summary>ì†ŒìŠ¤ì½”ë“œ</summary>
    
```swift
func makeCupPath() {
        let cupPath = UIBezierPath()
        
        cupPath.move(to: CGPoint(x: width * 0.15, y: height * 0.15))
        cupPath.addLine(to: CGPoint(x: width * 0.35, y: height * 0.75))
        cupPath.stroke()
        
        cupPath.move(to: CGPoint(x: width * 0.85, y: height * 0.15))
        cupPath.addLine(to: CGPoint(x: width * 0.65, y: height * 0.75))
        cupPath.stroke()
        
        cupPath.addQuadCurve(to: CGPoint(x: width * 0.35, y: height * 0.75),
                             controlPoint: CGPoint(x: width * 0.5, y: height * 0.825))
        cupPath.stroke()
        
        self.layer.addSublayer(cupShapeLayer)
        cupShapeLayer.path = cupPath.cgPath
    }
```
:fire: `addQuadCurve`ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ê²½ìš° `to` ë¶€ë¶„ì— ì‹œì‘ì ì„ ë„£ì§€ ì•Šê³  ëë‚˜ëŠ” ì§€ì ì„ ë„£ì–´ì¤˜ì•¼ í•œë‹¤. (addLineë„ ë§ˆì°¬ê°€ì§€) 
</details>


### vetto

<details>
    <summary>ì†ŒìŠ¤ì½”ë“œ</summary></summary>
    
```swift
func drawCup() {
    let cupPath = UIBezierPath()
        
    cupPath.move(to: CGPoint(x: 180, y: 200))
    cupPath.addLine(to: CGPoint(x: 200, y: 350))
    cupPath.addLine(to: CGPoint(x: 240, y: 350))
    cupPath.addLine(to: CGPoint(x: 260, y: 200))
    cupPath.stroke()
        
    cupLayer.frame = self.view.frame
    cupLayer.path = cupPath.cgPath
    cupLayer.strokeColor = UIColor.lightGray.cgColor
    cupLayer.fillColor = UIColor.clear.cgColor
    cupLayer.lineWidth = 10
    self.view.layer.addSublayer(cupLayer)
}

func drawStraw() {
    let strawPath = UIBezierPath()
        
    strawPath.lineCapStyle = .round
    strawPath.move(to: CGPoint(x: 220, y: 340))
    strawPath.addLine(to: CGPoint(x: 250, y: 190))
    strawPath.addLine(to: CGPoint(x: 270, y: 160))
    strawPath.stroke()
        
    strawLayer.frame = self.view.frame
    strawLayer.path = strawPath.cgPath
    strawLayer.strokeColor = UIColor.darkGray.cgColor
    strawLayer.fillColor = UIColor.clear.cgColor
    strawLayer.lineWidth = 10
    self.view.layer.addSublayer(strawLayer)
}
```
</details>



### ë¦¬ì§€


<details>
    <summary>ì†ŒìŠ¤ ì½”ë“œ</summary></summary>
    
```swift
final class DrinksView: UIView {
    
    let edgeOfCupsLayer = CAShapeLayer()
    let strawLayer = CAShapeLayer()
    let drinksLayer = CAShapeLayer()
    let maskingLayer = CAShapeLayer()

    func makeCup() {
        let path = UIBezierPath()
        path.lineWidth = 15
        
        path.move(to: CGPoint(x: 100, y: 200))
        path.addLine(to: CGPoint(x: 130, y: 500))
        path.addQuadCurve(to: CGPoint(x: 250, y: 500), controlPoint: CGPoint(x: 190, y: 515.6))
        path.addLine(to: CGPoint(x: 280, y: 200))
        
        edgeOfCupsLayer.strokeColor = UIColor.systemGray4.cgColor
        edgeOfCupsLayer.fillColor = UIColor.clear.cgColor
        edgeOfCupsLayer.lineWidth = path.lineWidth
        
        self.layer.addSublayer(edgeOfCupsLayer)
        edgeOfCupsLayer.path = path.cgPath

    }
    
    func makeStraw() {
        let path = UIBezierPath()
        path.lineWidth = 10
        
        path.move(to: CGPoint(x: 340, y: 120))
        path.addLine(to: CGPoint(x: 250, y: 210))
        path.addLine(to: CGPoint(x: 150, y: 480))
        
        strawLayer.strokeColor = UIColor.gray.cgColor
        strawLayer.fillColor = UIColor.clear.cgColor
        strawLayer.lineWidth = path.lineWidth
        strawLayer.lineCap = .round
        
        self.layer.addSublayer(strawLayer)
        strawLayer.path = path.cgPath
        
    }
    
    func makeMasking() {
        let path = UIBezierPath()
    
        path.move(to: CGPoint(x: 100, y: 300))
        path.addLine(to: CGPoint(x: 130, y: 500))
        path.addQuadCurve(to: CGPoint(x: 250, y: 500), controlPoint: CGPoint(x: 190, y: 515.6))
        path.addLine(to: CGPoint(x: 280, y: 300))
       
        maskingLayer.path = path.cgPath
        drinksLayer.mask = maskingLayer
    }
    
    func makeDrinks() {
        let path = UIBezierPath()
    
        path.move(to: CGPoint(x: 100, y: 200))
        path.addLine(to: CGPoint(x: 130, y: 500))
        path.addQuadCurve(to: CGPoint(x: 250, y: 500), controlPoint: CGPoint(x: 190, y: 515.6))
        path.addLine(to: CGPoint(x: 280, y: 200))
        
        drinksLayer.strokeColor = UIColor.clear.cgColor
        drinksLayer.fillColor = UIColor.brown.cgColor
        
        self.layer.addSublayer(drinksLayer)
        drinksLayer.path = path.cgPath
    }

}
class ViewController: UIViewController {
    
    let drinkView = DrinksView()

    override func viewDidLoad() {
        super.viewDidLoad()
       
        view.addSubview(drinkView)
        drinkView.makeCup()
        drinkView.makeStraw()
        drinkView.makeMasking()
        drinkView.makeDrinks()
    }
}
```
</details>
    
###### tags: `toyo`